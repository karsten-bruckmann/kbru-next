<ng-container *ngIf="form$ | async as form" [formGroup]="form">
  <ion-list inset *ngIf="form.controls.playerIds">
    <ion-item-divider>
      <ion-label>Spieler</ion-label>
    </ion-item-divider>
    <ui-ionic-list-input
      formControlName="playerIds"
      [allowedValues]="form.controls.playerIds.possibleValues"
      [getLabel]="getPlayerLabel"
      [getItemLabel]="form.controls.playerIds.getPlayerName"
      [getItemPlaceholder]="getPlayerPlaceholder"
      [addItem]="getAddPlayerCallback()"
      [length]="
        !form.value.playerIds || form.value.playerIds.length < 3
          ? 3
          : form.value.playerIds.length === 3
          ? 4
          : 5
      "
      color="light"
    ></ui-ionic-list-input>
    <ion-modal class="dialogue" [isOpen]="addPlayerModalOpen">
      <ng-template>
        <skat-list-group-page-add-player-form
          (added)="addPlayerModalOpen = false"
          (canceled)="addPlayerModalOpen = false"
        ></skat-list-group-page-add-player-form>
      </ng-template>
    </ion-modal>
  </ion-list>

  <ion-list inset *ngIf="form.controls.calculationType">
    <ion-item-divider>
      <ion-label>Berechnung</ion-label>
    </ion-item-divider>
    <ion-radio-group formControlName="calculationType">
      <ion-item
        *ngFor="let value of form.controls.calculationType.possibleValues"
        color="light"
      >
        <ion-label>{{ value | calculationType }}</ion-label>
        <ion-radio slot="end" [value]="value"></ion-radio>
      </ion-item>
    </ion-radio-group>
  </ion-list>

  <ion-list inset *ngIf="form.controls.spitzen">
    <ion-item-divider>
      <ion-label>Spitzen</ion-label>
    </ion-item-divider>
    <ion-radio-group formControlName="spitzen">
      <ion-item
        *ngFor="let value of form.controls.spitzen.possibleValues"
        color="light"
      >
        <ion-label>{{ value | spitzen }}</ion-label>
        <ion-radio slot="end" [value]="value"></ion-radio>
      </ion-item>
    </ion-radio-group>
  </ion-list>

  <ion-list inset *ngIf="form.controls.maxSets">
    <ion-item-divider>
      <ion-label>Runden</ion-label>
    </ion-item-divider>
    <ion-radio-group formControlName="maxSets">
      <ion-item
        color="light"
        *ngFor="let value of form.controls.maxSets.possibleValues"
      >
        <ion-label>{{ value | maxSets }}</ion-label>
        <ion-radio slot="end" [value]="value"></ion-radio>
      </ion-item>
    </ion-radio-group>
  </ion-list>

  <ion-list inset *ngIf="form.controls.centPerPoint">
    <ion-item-divider>
      <ion-label>Auszahlung</ion-label>
    </ion-item-divider>
    <ion-radio-group
      *ngIf="form.controls.centPerPoint"
      formControlName="centPerPoint"
    >
      <ion-item
        color="light"
        *ngFor="let value of form.controls.centPerPoint.possibleValues"
      >
        <ion-label>{{ value | centPerPoint }}</ion-label>
        <ion-radio slot="end" [value]="value"></ion-radio>
      </ion-item>
    </ion-radio-group>
  </ion-list>

  <ion-list>
    <ion-item color="light">
      <pre>{{ form.value | json }}</pre>
    </ion-item>
    <ion-item color="light">
      <pre>{{ form.controls.calculationType.errors | json }}</pre>
    </ion-item>
  </ion-list>
</ng-container>
